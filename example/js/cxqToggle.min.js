/**
 * User: Xiu Qiang Chu
 * Date: 20/06/12
 * Time: 23:11
 */

(function(a){a.fn.cxqToggle=function(b){var b=a.extend({defaultOpen:"",oneToggle:true,duration:700,effect:"show",activeClass:"active",clickElm:"toggleHead",headClass:"toggleHead",bodyClass:"toggleBody"},b);var c=a(this);var d=c.find("."+b.bodyClass);var e=false;this.each(function(f){function i(){g.find("."+b.clickElm).on("click",function(){if(g.hasClass(b.activeClass))k();else j()})}function j(){if(b.oneToggle){e=true;k()}l(false)}function k(){l(true)}function l(a){var f;if(a===false){g.addClass(b.activeClass);switch(b.effect){case"show":h.show();break;case"fade":h.fadeIn(b.duration);break;case"slide":h.slideDown(b.duration);break}}else{var i=e?c:g;i.removeClass(b.activeClass);f=e?d:h;switch(b.effect){case"show":f.hide();break;case"fade":f.fadeOut(b.duration);break;case"slide":f.slideUp(b.duration);break}e=false}}var g=a(this);var h=g.find("."+b.bodyClass);if(b.defaultOpen!=""&&b.defaultOpen==f+1)j();i()});return this}})(jQuery)